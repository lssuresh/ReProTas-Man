<p-contextMenu [global]="true" [model]="menuItems"></p-contextMenu>
<p-table #dt [columns]="columnsToDisplay" [value]="teamDevWeekTasks" selectionMode="single" [paginator]="true"
  [rows]="100" [resizableColumns]="true" *ngIf="teamDevWeekTasks">
  <ng-template pTemplate="caption">
    <div #tddev style="text-align: left">
      <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
      <input pInputText type="text" (input)="dt.filter($event.target.value, 'devName', 'contains')"
        placeholder="Developer Filter" style="width:auto">
    </div>
  </ng-template>
  <ng-template pTemplate="header" let-columns>
    <tr #tr>
      <th *ngFor="let col of columns" [pSortableColumn]="col.field" pResizableColumn>
        {{col.header}}
        <p-sortIcon [field]="col.field" *ngIf='col.header=="Developer"'></p-sortIcon>
      </th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-rowData let-rowIndex="rowIndex">
    <tr *ngFor="let row of rowData.maxTaskArrayPlaceHolder; let taskIndex=index">
      <td *ngIf="taskIndex==0" [attr.rowspan]="rowData.maxTasks">
        {{rowData.devName}}
      </td>
      <td pEditableColumn *ngFor="let col of weeks">
        <p-cellEditor>
          <ng-template pTemplate="input">
            <input pInputText type="text" [(ngModel)]="newTask" (focusout)="addTask(rowData.devName, col, taskIndex)"
              (focusin)="editTask(rowData.devName, col, taskIndex)">
          </ng-template>
          <ng-template pTemplate="output">
            {{getData(rowData.weekTask.get(col), taskIndex)}}
          </ng-template>
        </p-cellEditor>
      </td>
    </tr>
  </ng-template>
</p-table>
<div *ngIf="selectedTaskId" style="text-align:left">{{selectedTaskId}}</div>